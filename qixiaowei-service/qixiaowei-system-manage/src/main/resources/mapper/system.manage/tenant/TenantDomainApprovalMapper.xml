<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="net.qixiaowei.system.manage.mapper.tenant.TenantDomainApprovalMapper">
    <!--    查询租户域名申请-->
    <select id="selectTenantDomainApprovalByTenantDomainApprovalId"
            resultType="net.qixiaowei.system.manage.api.dto.tenant.TenantDomainApprovalDTO">
        SELECT
        tenant_domain_approval_id, tenant_id, approval_domain, applicant_user_id, applicant_user_account, submission_time, approval_time, approval_user_id, approval_status, remark, delete_flag, create_by, create_time, update_by, update_time
        FROM tenant_domain_approval
        WHERE  tenant_domain_approval_id=#{tenantDomainApproval}
        and delete_flag=0
    </select>

    <!--    查询租户域名申请列表-->
    <select id="selectTenantDomainApprovalList" resultType="net.qixiaowei.system.manage.api.dto.tenant.TenantDomainApprovalDTO">
        SELECT
        tenant_domain_approval_id, tenant_id, approval_domain, applicant_user_id, applicant_user_account, submission_time, approval_time, approval_user_id, approval_status, remark, delete_flag, create_by, create_time, update_by, update_time
        FROM tenant_domain_approval
        WHERE delete_flag=0
                <if test="tenantDomainApproval.tenantDomainApprovalId != null and tenantDomainApproval.tenantDomainApprovalId != ''">
                    and tenant_domain_approval_id=#{tenantDomainApproval.tenantDomainApprovalId}
                </if>
                <if test="tenantDomainApproval.tenantId != null and tenantDomainApproval.tenantId != ''">
                    and tenant_id=#{tenantDomainApproval.tenantId}
                </if>
                <if test="tenantDomainApproval.approvalDomain != null and tenantDomainApproval.approvalDomain != ''">
                    and approval_domain=#{tenantDomainApproval.approvalDomain}
                </if>
                <if test="tenantDomainApproval.applicantUserId != null and tenantDomainApproval.applicantUserId != ''">
                    and applicant_user_id=#{tenantDomainApproval.applicantUserId}
                </if>
                <if test="tenantDomainApproval.applicantUserAccount != null and tenantDomainApproval.applicantUserAccount != ''">
                    and applicant_user_account=#{tenantDomainApproval.applicantUserAccount}
                </if>
                <if test="tenantDomainApproval.submissionTime != null">
                    and submission_time=#{tenantDomainApproval.submissionTime}
                </if>
                <if test="tenantDomainApproval.approvalTime != null">
                    and approval_time=#{tenantDomainApproval.approvalTime}
                </if>
                <if test="tenantDomainApproval.approvalUserId != null and tenantDomainApproval.approvalUserId != ''">
                    and approval_user_id=#{tenantDomainApproval.approvalUserId}
                </if>
                <if test="tenantDomainApproval.approvalStatus != null and tenantDomainApproval.approvalStatus != ''">
                    and approval_status=#{tenantDomainApproval.approvalStatus}
                </if>
                <if test="tenantDomainApproval.remark != null and tenantDomainApproval.remark != ''">
                    and remark=#{tenantDomainApproval.remark}
                </if>
                <if test="tenantDomainApproval.deleteFlag != null and tenantDomainApproval.deleteFlag != ''">
                    and delete_flag=#{tenantDomainApproval.deleteFlag}
                </if>
                <if test="tenantDomainApproval.createBy != null and tenantDomainApproval.createBy != ''">
                    and create_by=#{tenantDomainApproval.createBy}
                </if>
                <if test="tenantDomainApproval.createTime != null">
                    and create_time=#{tenantDomainApproval.createTime}
                </if>
                <if test="tenantDomainApproval.updateBy != null and tenantDomainApproval.updateBy != ''">
                    and update_by=#{tenantDomainApproval.updateBy}
                </if>
                <if test="tenantDomainApproval.updateTime != null">
                    and update_time=#{tenantDomainApproval.updateTime}
                </if>
    </select>
    <!--新增租户域名申请-->
    <insert id="insertTenantDomainApproval" useGeneratedKeys="true" keyProperty="tenantDomainApprovalId">
        INSERT INTO tenant_domain_approval (tenant_id,approval_domain,applicant_user_id,applicant_user_account,submission_time,approval_time,approval_user_id,approval_status,remark,delete_flag,create_by,create_time,update_by,update_time)
        VALUES
        (#{tenantDomainApproval.tenantId},#{tenantDomainApproval.approvalDomain},#{tenantDomainApproval.applicantUserId},#{tenantDomainApproval.applicantUserAccount},#{tenantDomainApproval.submissionTime},#{tenantDomainApproval.approvalTime},#{tenantDomainApproval.approvalUserId},#{tenantDomainApproval.approvalStatus},#{tenantDomainApproval.remark},#{tenantDomainApproval.deleteFlag},#{tenantDomainApproval.createBy},#{tenantDomainApproval.createTime},#{tenantDomainApproval.updateBy},#{tenantDomainApproval.updateTime})
    </insert>
    <!--修改租户域名申请-->
    <update id="updateTenantDomainApproval">
        UPDATE tenant_domain_approval
        SET
                    <if test="tenantDomainApproval.tenantDomainApprovalId != null and tenantDomainApproval.tenantDomainApprovalId != ''">
                        tenant_domain_approval_id=#{tenantDomainApproval.tenantDomainApprovalId},
                    </if>
                    <if test="tenantDomainApproval.tenantId != null and tenantDomainApproval.tenantId != ''">
                        tenant_id=#{tenantDomainApproval.tenantId},
                    </if>
                    <if test="tenantDomainApproval.approvalDomain != null and tenantDomainApproval.approvalDomain != ''">
                        approval_domain=#{tenantDomainApproval.approvalDomain},
                    </if>
                    <if test="tenantDomainApproval.applicantUserId != null and tenantDomainApproval.applicantUserId != ''">
                        applicant_user_id=#{tenantDomainApproval.applicantUserId},
                    </if>
                    <if test="tenantDomainApproval.applicantUserAccount != null and tenantDomainApproval.applicantUserAccount != ''">
                        applicant_user_account=#{tenantDomainApproval.applicantUserAccount},
                    </if>
                    <if test="tenantDomainApproval.submissionTime != null">
                        submission_time=#{tenantDomainApproval.submissionTime},
                    </if>
                    <if test="tenantDomainApproval.approvalTime != null">
                        approval_time=#{tenantDomainApproval.approvalTime},
                    </if>
                    <if test="tenantDomainApproval.approvalUserId != null and tenantDomainApproval.approvalUserId != ''">
                        approval_user_id=#{tenantDomainApproval.approvalUserId},
                    </if>
                    <if test="tenantDomainApproval.approvalStatus != null and tenantDomainApproval.approvalStatus != ''">
                        approval_status=#{tenantDomainApproval.approvalStatus},
                    </if>
                    <if test="tenantDomainApproval.remark != null and tenantDomainApproval.remark != ''">
                        remark=#{tenantDomainApproval.remark},
                    </if>
                    <if test="tenantDomainApproval.deleteFlag != null and tenantDomainApproval.deleteFlag != ''">
                        delete_flag=#{tenantDomainApproval.deleteFlag},
                    </if>
                    <if test="tenantDomainApproval.createBy != null and tenantDomainApproval.createBy != ''">
                        create_by=#{tenantDomainApproval.createBy},
                    </if>
                    <if test="tenantDomainApproval.createTime != null">
                        create_time=#{tenantDomainApproval.createTime},
                    </if>
                    <if test="tenantDomainApproval.updateBy != null and tenantDomainApproval.updateBy != ''">
                        update_by=#{tenantDomainApproval.updateBy},
                    </if>
                    <if test="tenantDomainApproval.updateTime != null">
                        update_time=#{tenantDomainApproval.updateTime}
                    </if>
        WHERE
                 tenant_domain_approval_id=#{tenantDomainApproval.tenantDomainApprovalId}
    </update>
    <!--逻辑删除租户域名申请-->
    <update id="logicDeleteTenantDomainApprovalByTenantDomainApprovalId">
        UPDATE tenant_domain_approval
        SET     delete_flag= 1,
                update_by=#{tenantDomainApproval.updateBy},
                update_time=#{tenantDomainApproval.updateTime}
        WHERE
                tenant_domain_approval_id=#{tenantDomainApproval.tenantDomainApprovalId}
    </update>
    <!--逻辑批量删除租户域名申请-->
    <update id="logicDeleteTenantDomainApprovalByTenantDomainApprovalIds">
        UPDATE tenant_domain_approval
        SET     delete_flag= 1,
                update_by=#{updateBy},
                update_time=#{updateTime}
        WHERE
         tenant_domain_approval_id IN
            <foreach item="item"
                     collection="tenantDomainApprovalIds"
                     index="index" open="(" separator="," close=")">
                #{item}
            </foreach>
    </update>
    <!--批量新增租户域名申请-->
    <insert id="batchTenantDomainApproval">
        INSERT INTO tenant_domain_approval (tenant_id,approval_domain,applicant_user_id,applicant_user_account,submission_time,approval_time,approval_user_id,approval_status,remark,delete_flag,create_by,create_time,update_by,update_time)
        VALUES
        <foreach item="item" index="index"
                 collection="tenantDomainApprovals"
                 separator=",">
            (#{item.tenantId},#{item.approvalDomain},#{item.applicantUserId},#{item.applicantUserAccount},#{item.submissionTime},#{item.approvalTime},#{item.approvalUserId},#{item.approvalStatus},#{item.remark},#{item.deleteFlag},#{item.createBy},#{item.createTime},#{item.updateBy},#{item.updateTime})
        </foreach>
    </insert>

    <!--物理删除租户域名申请-->
    <delete id="deleteTenantDomainApprovalByTenantDomainApprovalId">
        DELETE FROM tenant_domain_approval
        WHERE  tenant_domain_approval_id=#{tenantDomainApproval}

    </delete>
    <!--物理批量删除租户域名申请-->
    <delete id="deleteTenantDomainApprovalByTenantDomainApprovalIds">
        DELETE FROM tenant_domain_approval
        WHERE  tenant_domain_approval_id IN
            <foreach item="item"
                     collection="tenantDomainApprovalIds"
                     index="index" open="(" separator="," close=")">
                #{item}
            </foreach>
    </delete>
    <!--批量修改租户域名申请-->
    <update id="updateTenantDomainApprovals">
        update tenant_domain_approval
        <trim prefix="set" suffixOverrides=",">
            <trim prefix="tenant_domain_approval_id=case" suffix="end,">
                <foreach collection="tenantDomainApprovalList" item="item" index="index">
                </foreach>
            </trim>
            <trim prefix="tenant_id=case" suffix="end,">
                <foreach collection="tenantDomainApprovalList" item="item" index="index">
                             <if test="item.tenantId != null and item.tenantId != ''">
                                 when tenant_domain_approval_id=#{item.tenantDomainApprovalId} then #{item.tenant_id}
                             </if>
                </foreach>
            </trim>
            <trim prefix="approval_domain=case" suffix="end,">
                <foreach collection="tenantDomainApprovalList" item="item" index="index">
                             <if test="item.approvalDomain != null and item.approvalDomain != ''">
                                 when tenant_domain_approval_id=#{item.tenantDomainApprovalId} then #{item.approval_domain}
                             </if>
                </foreach>
            </trim>
            <trim prefix="applicant_user_id=case" suffix="end,">
                <foreach collection="tenantDomainApprovalList" item="item" index="index">
                             <if test="item.applicantUserId != null and item.applicantUserId != ''">
                                 when tenant_domain_approval_id=#{item.tenantDomainApprovalId} then #{item.applicant_user_id}
                             </if>
                </foreach>
            </trim>
            <trim prefix="applicant_user_account=case" suffix="end,">
                <foreach collection="tenantDomainApprovalList" item="item" index="index">
                             <if test="item.applicantUserAccount != null and item.applicantUserAccount != ''">
                                 when tenant_domain_approval_id=#{item.tenantDomainApprovalId} then #{item.applicant_user_account}
                             </if>
                </foreach>
            </trim>
            <trim prefix="submission_time=case" suffix="end,">
                <foreach collection="tenantDomainApprovalList" item="item" index="index">
                             <if test="item.submissionTime != null">
                                 when tenant_domain_approval_id=#{item.tenantDomainApprovalId} then #{item.submission_time}
                             </if>
                </foreach>
            </trim>
            <trim prefix="approval_time=case" suffix="end,">
                <foreach collection="tenantDomainApprovalList" item="item" index="index">
                             <if test="item.approvalTime != null">
                                 when tenant_domain_approval_id=#{item.tenantDomainApprovalId} then #{item.approval_time}
                             </if>
                </foreach>
            </trim>
            <trim prefix="approval_user_id=case" suffix="end,">
                <foreach collection="tenantDomainApprovalList" item="item" index="index">
                             <if test="item.approvalUserId != null and item.approvalUserId != ''">
                                 when tenant_domain_approval_id=#{item.tenantDomainApprovalId} then #{item.approval_user_id}
                             </if>
                </foreach>
            </trim>
            <trim prefix="approval_status=case" suffix="end,">
                <foreach collection="tenantDomainApprovalList" item="item" index="index">
                             <if test="item.approvalStatus != null and item.approvalStatus != ''">
                                 when tenant_domain_approval_id=#{item.tenantDomainApprovalId} then #{item.approval_status}
                             </if>
                </foreach>
            </trim>
            <trim prefix="remark=case" suffix="end,">
                <foreach collection="tenantDomainApprovalList" item="item" index="index">
                             <if test="item.remark != null and item.remark != ''">
                                 when tenant_domain_approval_id=#{item.tenantDomainApprovalId} then #{item.remark}
                             </if>
                </foreach>
            </trim>
            <trim prefix="delete_flag=case" suffix="end,">
                <foreach collection="tenantDomainApprovalList" item="item" index="index">
                             <if test="item.deleteFlag != null and item.deleteFlag != ''">
                                 when tenant_domain_approval_id=#{item.tenantDomainApprovalId} then #{item.delete_flag}
                             </if>
                </foreach>
            </trim>
            <trim prefix="create_by=case" suffix="end,">
                <foreach collection="tenantDomainApprovalList" item="item" index="index">
                             <if test="item.createBy != null and item.createBy != ''">
                                 when tenant_domain_approval_id=#{item.tenantDomainApprovalId} then #{item.create_by}
                             </if>
                </foreach>
            </trim>
            <trim prefix="create_time=case" suffix="end,">
                <foreach collection="tenantDomainApprovalList" item="item" index="index">
                             <if test="item.createTime != null">
                                 when tenant_domain_approval_id=#{item.tenantDomainApprovalId} then #{item.create_time}
                             </if>
                </foreach>
            </trim>
            <trim prefix="update_by=case" suffix="end,">
                <foreach collection="tenantDomainApprovalList" item="item" index="index">
                             <if test="item.updateBy != null and item.updateBy != ''">
                                 when tenant_domain_approval_id=#{item.tenantDomainApprovalId} then #{item.update_by}
                             </if>
                </foreach>
            </trim>
            <trim prefix="update_time=case" suffix="end,">
                <foreach collection="tenantDomainApprovalList" item="item" index="index">
                             <if test="item.updateTime != null">
                                 when tenant_domain_approval_id=#{item.tenantDomainApprovalId} then #{item.update_time}
                             </if>
                </foreach>
            </trim>
        </trim>
        where
        <foreach collection="tenantDomainApprovalList" separator="or" item="item" index="index">
                    tenant_domain_approval_id=#{item.tenantDomainApprovalId}
        </foreach>
    </update>
</mapper>


